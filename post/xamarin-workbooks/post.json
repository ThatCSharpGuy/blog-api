{	
	"id" : "/post/xamarin-workbooks/",
	"tv" : false,
	"date": "2016-11-29 13:00:01 -0600",
	"title" : "Bienvenido a los Xamarin Workbooks",
	"author" : "Antonio Feregrino Bolaños",
	"featured_image": "http://thatcsharpguy.com/postimages//xamarin/workbooks/featured.jpg",
	"tags" :
	[ 
		"AprendeCSharp",
		"Xamarin"
	],
	"content" : "<p>Los Workbooks son una especie de documentos “vivos” con los que puedes compilar y ejecutar código en C#. Con ellos, aprender a programar a .NET cobra un nuevo significado. Mira, por ejemplo, cómo se ve un “Hola mundo“ en ellos:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">“</span><span class="n">Hola</span> <span class="n">mundo</span><span class="err">”</span><span class="p">);</span></code></pre></figure></p>

<h3 id=\"interfaz\">Interfaz</h3>
<p>Vamos a ver algunos elementos de la interfaz antes de adentrarnos de lleno en el tema. Estos son los controles que te encontrarás muy seguido:</p>

<p><img src=\"http://i.imgur.com/LujKEPN.png\" alt=\"\" title=\"Interfaz\" /></p>

<p>Con el símbolo de <code>+</code> puedes agregar un nuevo bloque de código, con el de <code>”</code> puedes agregar un bloque de texto y con el de <code>✖️</code> puedes eliminar el bloque seleccionado.</p>

<p>Otro de los elementos con los que seguramente estarás muy familiarizado es el <em>Intellisense</em>:</p>

<p><img src=\"http://i.imgur.com/V6LUPYh.png\" alt=\"\" title=\"Intellisense\" /></p>

<h3 id=\"declaracin-de-variables\">Declaración de variables</h3>

<p>También podemos declarar variables y asignarlas para el documento:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">int</span> <span class="n">entero</span><span class="p">;</span> <span class="c1">// declaración</span>
<span class="kt">float</span> <span class="n">flotante</span> <span class="p">=</span> <span class="m">10f</span><span class="p">;</span> <span class="c1">// Asignación</span>
<span class="kt">decimal</span> <span class="n">x</span> <span class="p">=</span> <span class="p">(</span><span class="kt">decimal</span><span class="p">)</span><span class="n">flotante</span> <span class="p">*</span> <span class="m">3</span><span class="p">;</span>
<span class="kt">decimal</span> <span class="n">y</span> <span class="p">=</span> <span class="n">x</span> <span class="p">/</span> <span class="m">6</span><span class="p">;</span></code></pre></figure></p>

<h3 id=\"declaracin-de-clases\">Declaración de clases</h3>

<p>Inclusive podemos crear clases completas</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">Pokemon</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">int</span> <span class="n">Height</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="kt">int</span> <span class="n">Weight</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span></code></pre></figure></p>

<p>Y luego, instanciarlas:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">p1</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Pokemon</span><span class="p">();</span>
<span class="n">p1</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="err">“</span><span class="n">Pikachu</span><span class="err">”</span><span class="p">;</span></code></pre></figure></p>

<h3 id=\"nuget\">NuGet</h3>

<p>Oh, y también puedes insertar paquetes de <em>NuGet</em>, para hacerlo, tienes que ir a la barra de menús <code>Archivo &gt; Agregar paquetes</code> y listo. Por ejemplo, en este Workbook agregué los paquetes de las librerías HTTP de Microsoft y Newtonsoft.Json para manipular este formato. Vamos a consultar la PokéAPI</p>

<p>Una vez agregado el paquete aparecerán unas directivas para preprocesador que le indican al Wokbook que haremos uso de dichos paquetes:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">#</span><span class="n">r</span> <span class="err">“</span><span class="n">System</span><span class="p">.</span><span class="n">Net</span><span class="p">.</span><span class="n">Http</span><span class="p">.</span><span class="n">Primitives</span><span class="err">”</span>
<span class="err">#</span><span class="n">r</span> <span class="err">“</span><span class="n">System</span><span class="p">.</span><span class="n">Net</span><span class="p">.</span><span class="n">Http</span><span class="p">.</span><span class="n">Extensions</span><span class="err">”</span>
<span class="err">#</span><span class="n">r</span> <span class="err">“</span><span class="n">Newtonsoft</span><span class="p">.</span><span class="n">Json</span><span class="err">”</span></code></pre></figure></p>

<p>A partir de entonces podemos hacer uso de estas, ¡pero hey! no olvides los <code>using</code></p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">using</span> <span class="nn">Newtonsoft</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http.Headers</span><span class="p">;</span></code></pre></figure></p>

<p>Ahora sí, vamos a consultar la PokéAPI. Configuramos el cliente:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="n">HttpClient</span><span class="p">();</span>
<span class="n">client</span><span class="p">.</span><span class="n">BaseAddress</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Uri</span><span class="p">(</span><span class="err">“</span><span class="n">http</span><span class="p">:</span><span class="c1">//pokeapi.co/api/v2/”);</span>
<span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Accept</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
<span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Accept</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">MediaTypeWithQualityHeaderValue</span><span class="p">(</span><span class="err">“</span><span class="n">application</span><span class="p">/</span><span class="n">json</span><span class="err">”</span><span class="p">));</span></code></pre></figure></p>

<p>Y realizamos las llamadas. ¿por qué no buscas a tu Pokémon favorito modificando la variable <code>pkmn</code>? (no olvides presionar ctrl o cmd + ↩︎ para ejecutar el código:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">pkmn</span> <span class="p">=</span> <span class="err">“</span><span class="n">jirachi</span><span class="err">”</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">GetAsync</span><span class="p">(</span><span class="err">“</span><span class="n">pokemon</span><span class="p">/</span><span class="err">”</span> <span class="p">+</span> <span class="n">pkmn</span><span class="p">);</span></code></pre></figure></p>

<p>¡Oh! lo olvidaba, ¿ves eso que sale debajo de nuestro código cada vez que lo ejecutamos? no es nada más que otra de las maravillas de los Workbooks, que realiza la evaluación de la última expresión y la presenta en pantalla, además de que nos da varias opciones para visualizar la información:</p>

<p>Ahora sí, de vuelta al código:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">if</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">IsSuccessStatusCode</span><span class="p">)</span>
<span class="p">{</span> <span class="c1">// … Read the string.</span>
	    <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">ReadAsStringAsync</span><span class="p">();</span>
        <span class="kt">var</span> <span class="n">poke</span> <span class="p">=</span> <span class="k">await</span> <span class="n">Newtonsoft</span><span class="p">.</span><span class="n">Json</span><span class="p">.</span><span class="n">JsonConvert</span><span class="p">.</span><span class="n">DeserializeObjectAsync</span><span class="p">&lt;</span><span class="n">pokemon</span><span class="p">&gt;(</span><span class="n">result</span><span class="p">);</span>
	    <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">$\</span><span class="s">&quot;{poke.Id:000} {poke.Name}: H: {poke.Height} and W: {poke.Weight}\&quot;);</span>
<span class="p">}</span></code></pre></figure></pokemon></p>

<h3 id=\"cmo-son-los-workbooks\">¿Cómo son los Workbooks?</h3>

<p>Por si mismos, los Workbooks no son más que archivos te texto plano (un híbrido entre YAML, Markdown y otra cosa) que son interpretados por la aplicación de escritorio.</p>

<p>Vamos a revisar precisamente este mismo archivo. Estas son las primeras líneas:</p>

<p><img src=\"http://i.imgur.com/1xb3xPm.png\" alt=\"\" title=\"Primeras líneas de un Workbook\" /></p>

<p>La primera es un <em>Uniform Type Identifier</em>, la segunda es la especificación de para qué plataformas es nuestro espacio de trabajo (en este caso es la consola) y por último la declaración de los paquetes de los que se hace uso.</p>

<p>Otra cosa que podemos revisar es la forma en la que los bloques de código se especifican, es muy parecido a cuando se declaran en markdown, con la diferencia de que tiene un <code>csharp</code> después de las tildes invertidas:</p>

<p><img src=\"http://i.imgur.com/ac1OWU9.png\" alt=\"\" title=\"Bloque de código C#\" /></p>

<p>Lo cierto es que varias veces le tuve que meter las manos al código fuente del archivo para lograr algunas cosas en este archivo, pero vamos, que apenas es la primera versión “estable“ de esta herramienta.</p>

<h2 id=\"instalacin\">Instalación</h2>

<p>Si ya estás ansioso por descargar y probar los Workbooks puedes dirigirte a <a href=\"https://developer.xamarin.com/guides/cross-platform/workbooks/install\" target=\"_blank\">este enlace</a>.</p>

<h2 id=\"usos\">Usos</h2>

<p>Seguramente ya estarás pensando en algún uso para esta nueva herramienta. El más claro que yo tengo en mente es el poder los posts de <a href=\"http://thatcsharpguy.com/tag/AprendeCSharp/\" target=\"_blank\">#AprendeCSharp</a>, es más, ¿por qué no comienzas por <a href=\"https://github.com/ThatCSharpGuy/guoerbucs/blob/master/hola.workbook/index.workbook\" target=\"_blank\">descargar este</a> o <a href=\"https://developer.xamarin.com/guides/cross-platform/workbooks/samples/\" target=\"_blank\">los que Xamarin preparó para ti</a>.</p>

<p>Eso es todo por este post, espero descarguen los Xamarin Workbooks y los usen como una herramienta para aprender.</p>
"
}