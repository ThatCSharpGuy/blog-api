{	
	"id" : "/post/var-en-c-sharp/",
	"tv" : false,
	"date": "2015-10-29 14:00:00 -0600",
	"title" : "¿Qué es var en C#?",
	"author" : "Antonio Feregrino Bolaños",
	"featured_image": "http://thatcsharpguy.com/postimagesfeatured.jpg",
	"tags" : ["AprendeCSharp"],
	  
	"content": '"Como programadores hay muchas ventajas que nos otorga C#, ya sea a la hora de escribir nuestros programas o a la hora de ponerlos a funcionar. En este post les voy a hablar acerca de una de las ventajas al escribir nuestros programas, pero para eso, veamos antes este código:  \n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nvar</span> <span class="n">numeroElementos</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span><span class="err">\</span><span class="n">nvar</span> <span class="n">otroNumero</span> <span class="p">=</span> <span class="m">5L</span><span class="p">;</span><span class="err">\</span><span class="n">nvar</span> <span class="n">nombre</span> <span class="p">=</span> <span class="err">\</span><span class="s">&quot;Paquito\&quot;;\nvar x = nombre + numeroElementos;\nvar y = numeroElementos + otroNumero;\nvar sb =  new StringBuilder();\nvar buenEstudiante =  new Persona(\&quot;Estudiante\&quot;);\n</span></code></pre></figure>  \n**¿Uhhhh?** ¿entonces qué significa `var`?  \n\n### var  \nPues bien, usar la palabra <strike>reservada</strike> `var` significa que estamos dejándole al compilador la tarea de asignar un tipo a nuestras variables. Llamamos a esto *tipado implícito*, así nos quitamos de encima la tarea de escribir los tipos completos. Entonces:  \n\n- `var numeroElementos = 5;` &#8594; `int numeroElementos = 5;`  \n- `var otroNumero = 5l;` &#8594; `long otroNumero = 5l;`\n- `var nombre = \"Paquito\";` &#8594; `string nombre = \"Paquito\";`    \n<br />  \n\nPero no solo eso, también podemos usar `var` para instanciaciones un poco más complejas:  \n\n- `nombre + numeroElementos` es `string + int` que resulta en `string`, por lo tanto tambièn pudimos haber escrito: `string x = nombre + numeroElementos;`  \n- `numeroElementos + otroNumero` es `int + long` que resulta en `long`, por lo tanto también pudimos haber escrito `long y = numeroElementos + otroNumero`    \n<br />\n\nTambén podríamos pensar que `var` funciona solo para tipos primitivos del lenguaje, sin embargo no es así, como lo demuestra:  \n\n- `var buenEstudiante = new Persona(\"Estudiante\")` en la que podemos reemplazar `var` por `Persona`, o\n- `var sb = new StringBuilder();` en la que puede ser reemplazada por `StringBuilder`  \n  \n### Casos especiales  \nSi bien es posible usar `var` para cualquier instanciación de una variable como en los casos anteriores, no es común usarla ya que a lo mucho nos está ahorrando algunas letras por cada variable. Sin embargo hay casos en los que su uso se vuelve bastante relevante y hasta necesario.  \n<br />\nUn caso en el que es bastánte práctico usarlo es cuando estamos trabajando con LINQ (LINQ es un tema que merece su propio post, y lo tendrá), ya que muchas veces no es tan claro el resultado de una sentencia LINQ, por lo tanto es común encontrar declaraciones como:\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nvar</span> <span class="n">listaMenores</span> <span class="p">=</span> <span class="n">personas</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Edad</span> <span class="p">&lt;</span> <span class="m">10</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">nvar</span> <span class="n">listaMayores</span> <span class="p">=</span> <span class="k">from</span> <span class="n">p</span> <span class="k">in</span> <span class="n">personas</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">t</span>   <span class="k">where</span> <span class="n">p</span><span class="p">.</span><span class="n">Edad</span> <span class="p">&gt;</span> <span class="m">10</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">t</span>   <span class="k">select</span> <span class="n">p</span><span class="p">;</span><span class="err">\</span><span class="n">n</span></code></pre></figure>  \n\nUn caso en el que es **completamente necesario** el uso de `var` es cuando dentro de nuestro código usamos tipos anónimos, en pocas palabras un tipo anónimo es un objeto creado \"al vuelo\" sin declarar una clase. Aunque estos, al igual que LINQ, merecen su propio post (que también haré).  \n\n### Limitaciones\nEl *tipado implícito* tiene algunas limitantes, una de ellas parecería ser bastante obvia, y esta es que no se puede escribir una declaración como:\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nvar</span> <span class="n">indeciso</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span><span class="err">\</span><span class="n">n</span></code></pre></figure>  \nYa que el compilador no puede inferir el tipo de `null`, si lo intentamos obtendremos un bonito error de compilación.\nLa segunda limitante es que únicamente podemos usar `var` para variables locales, es decir, únicamente dentro de la implementación de nuestros métodos. En otras palabras, no podemos hacer algo como:\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nclass</span> <span class="n">Persona</span> <span class="err">\</span><span class="n">n</span><span class="p">{</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">tvar</span> <span class="n">Edad</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">t</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">tpublic</span> <span class="n">Persona</span><span class="p">(</span> <span class="c1">// ...\n</span></code></pre></figure>  \n    \n### Desventajas\nLa única gran desventaja que veo en esta caracterísitca es que si se abusa de ellos y en combinación con tipos de dato complejos podemos escribir código potencialmente inentendible, al grado que ni nosotros mismos podamos entender lo que escribimos.  \nPersonalmente siempre uso `var` para declaraciones de tipos de dato simples como enteros o cadenas. \n\n### Importante  \nEs importante repetir esto: **C# sigue siendo fuertemente tipado, con var lo único que hacemos es dejarle la tarea al compilador de asignar un tipo para nuestra variable al momento de la compilación**.  \n<br />\nEn el post original había mencionado que `var` es una palabra reservada, cuando en realdad, no lo es. Depende del contexto.\n\n### Lo que sigue  \nEn este post hablamos de dos nuevos conceptos: LINQ y tipos anónimos, y sobre uno de ellos dos será el post siguiente, ¿tienes preferencia sobre alguno? házmelo saber vía <a href=\"https://twitter.com/intent/tweet?text=@io_exception\">Twitter</a> o por <a href=\"mailto:feregrino@thatcsharpguy.com?subject=\">correo electrónico</a>.\n\n"'   
}