{	
	"id" : "/post/learning-xamarin-ios-stanford-cs193p/",
	"tv" : false,
	"date": "2016-12-27 02:00:00 -0600",
	"title" : "Learning Xamarin.iOS at Stanford",
	"author" : "Antonio Feregrino Bolaños",
	"featured_image": "http://thatcsharpguy.com/postimages//xamarin-ios/stanford.jpg",
	"tags" :
	[ 
		"Xamarin",
		"XamariniOS"
	],
	"content" : "<p>To finish the year in a good manner I decided to ramp up my Xamarin.iOS development skills. So far I had only worked on iOS apps using Xamarin.Forms and I have only made small apps following Apple tutorials <a href=\"https://developer.apple.com/library/content/referencelibrary/GettingStarted/DevelopiOSAppsSwift/\" target=\"_blank\">like this</a>, but for me that is not enough, I wanted to take a course like I did a few years ago when I took one on Android dev, with that in mind <a href=\"https://twitter.com/io_exception/status/807047846063177728\" target=\"_blank\">I asked on Twitter</a> whether NSScreencasts was a good choice for novices.</p>

<p>Luckily I got a several answers of all kind, generally the answers where a big yes, but not for beginners (which I consider myself), a couple of them suggested some books, but three suggested I should took a free Stanford Course with the nuance that it was given using Swift 2, to me it isn’t a huge deal as my main focus is to learn the workflow and essentials of iOS dev, and then transfer that knowledge to Xamarin.iOS.</p>

<p>I’m about 3 lectures away from finishing the course, but in this post I’ll share my experience so far:</p>

<h2 id=\"syntax-differences\">Syntax differences</h2>
<p>This may be because I am a .NET developer since 2008 but, mate: Swift syntax is so weird! and my guess is that is in great part thanks to Obj-C… but anyway, the differences for basic properties, methods, base classes, aren’t that big. You can get around them thanks to the great intellisense offered by Xamarin/Visual studio since they are mostly only casing (<code>tableView</code> vs <code>TableView</code>) distinctions, if you want, you can read my post on basic <a href=\"../xamarin-ios-vs-traditional\" target=\"_blank\">Xamarin.iOS vs Swift differences</a>.</p>

<p>In other cases you’ll have to look for the arguments and return type of a given method to be 90% that you are calling the right method (the other 10% comes from executing and see if it works as expected).</p>

<h2 id=\"enums-whith-associated-values\">Enums whith associated values</h2>
<p>WAIT WHAT? really? wow, there are no such things when using C#… you’ll have to work around this issue, C# do have enums but they’re <em>masked</em> integer types and no other info can be associated with them.</p>

<p>What I ended up doing to overcome this issue for the <em>Calculator assignment</em> was to create <a href=\"https://github.com/fferegrino/cs193/blob/master/Calculator/CalculatorBrainDictionaries.cs\" target=\"_blank\">a few dictionaries</a>. It got a bit messy, but in the end it worked pretty good.</p>

<h2 id=\"closures\">Closures</h2>
<p>Closures in Swift are our good (not so) old Func and Action types in C#. You don’t get the nice $1, $2 syntax, but who needs that? A thing to note is that in Swift you the possibility to specify how a local variable will be referenced inside a closure, in order to avoid memory leaks.</p>

<h2 id=\"of-vars-and-properties\">Of vars and properties</h2>
<p>In Swift exist properties which are almost, almost like properties in C#, you can see this when using the “stored properties”:</p>

<p><figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">class</span> <span class="n">AxesDrawer</span>
<span class="p">{</span>
    <span class="k">var</span> <span class="n">color</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">blueColor</span><span class="p">()</span>
    <span class="k">var</span> <span class="nl">minimumPointsPerHashmark</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="o">=</span> <span class="mi">40</span></code></pre></figure></p>

<p>Which are somewhat like the “automplmemented properties” in C#</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">class</span> <span class="nc">AxesDrawer</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="n">UIColor</span> <span class="n">Color</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">CGFloat</span> <span class="n">MinimumPointsPerHashmark</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span></code></pre></figure></p>

<p>In both languages you can have computed properties:</p>

<p><figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// Swift</span>
<span class="k">class</span> <span class="n">AxesDrawer</span> 
<span class="p">{</span>
    <span class="n">private</span> <span class="k">var</span> <span class="nl">_color</span> <span class="p">:</span> <span class="bp">UIColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">blueColor</span><span class="p">()</span>
    <span class="k">var</span> <span class="nl">color</span> <span class="p">:</span> <span class="bp">UIColor</span> <span class="p">{</span> 
        <span class="kr">get</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="n">_color</span> 
        <span class="p">}</span> 
        <span class="kr">set</span> <span class="p">{</span> 
            <span class="n">_color</span> <span class="o">=</span> <span class="n">newValue</span> 
        <span class="p">}</span> 
    <span class="p">}</span></code></pre></figure></p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="c1">// C#</span>
<span class="k">class</span> <span class="nc">AxesDrawer</span> 
<span class="p">{</span>
    <span class="n">UIColor</span> <span class="n">_color</span> <span class="p">=</span> <span class="n">UIColor</span><span class="p">.</span><span class="n">Blue</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">UIColor</span> <span class="n">Color</span> 
    <span class="p">{</span> 
        <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_color</span><span class="p">;</span> <span class="p">}</span> 
        <span class="k">set</span> <span class="p">{</span> <span class="n">_color</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span> 
    <span class="p">}</span></code></pre></figure></p>

<p>Another cool feature that I would enjoy in C# are the property observers (<code>willSet</code> and <code>didSet</code>) which behavior we can mimic in C# using computed properties but the code does not look as clean as with Apple’s language:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="kt">double</span> <span class="n">_scale</span> <span class="p">=</span> <span class="m">0.9</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">double</span> <span class="n">Scale</span>
<span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_scale</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">set</span> 
    <span class="p">{</span> 
        <span class="c1">// willSet code</span>
        <span class="n">_scale</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
        <span class="c1">// didSet code </span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure></p>

<h2 id=\"implementing-protocols\">Implementing protocols</h2>
<p>When implementing protocols, there is a weird thing that happens: At first I thought that Protocols in Swift where like Interfaces in C#… turns out they are not! When using protocols there are some methods or properties that you are not obligated to implement whereas when using an interface you are required to implement all the members defined within it, so the guys at Xamarin came up with this weird solution where you need to implement an <em>EMPTY</em> interface that has nothing but metadata that you can use to mimic the protocols behavior (<a href=\"https://developer.xamarin.com/api/type/MonoTouch.UIKit.IUITextViewDelegate/\" target=\"_blank\">see here</a>). For example, take a look at the approach to create a delegate for the UITextField and respond to a protocol’s member call:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">TweetTableViewController</span> <span class="p">:</span> <span class="n">UITableViewController</span><span class="p">,</span> <span class="n">IUITextFieldDelegate</span>
<span class="p">{</span>
    <span class="c1">// …&lt;/p&gt;</span>

<span class="p">&lt;</span><span class="n">pre</span><span class="p">&gt;&lt;</span><span class="n">code</span><span class="p">&gt;[</span><span class="n">Export</span><span class="p">(</span><span class="err">\</span><span class="s">&quot;textFieldShouldReturn:\&quot;)]</span>
<span class="k">public</span> <span class="kt">bool</span> <span class="nf">ShouldReturn</span><span class="p">(</span><span class="n">UITextField</span> <span class="n">textField</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Delegate code </span></code></pre></figure>  
</code></pre>

<h2 id=\"swifts-extensions-to-types\">Swift’s extensions to types</h2>
<p>When it comes to extend the capabilities of classes, Swift offers a more range of movement than C# since you can add properties, constructors and make a class adopt a protocol. C# only allows to “extend” vía static methods, no other members can be added to a given type.</p>

<h2 id=\"using-the-ios-interface-designer\">Using the iOS interface designer</h2>
<p>Neither the Android designer nor the iOS designer are perfect in their current form, and as such I think it is awesome that you can use Xcode to create your UI and then have it sync and map every outlet and action in your C# project within Xamarin Studio. What you need to do is to <em>right click</em> on your storyboard file and select <code>Open with Xcode interface builder</code>.</p>

<p>Every time you save your interface in Xcode it’ll be synced to Xamarin Studio without issues.</p>

<p>The Xamarin approach will create a WhateverViewController.designer.cs containing a partial definition of your <code>UIViewController</code> derivate class, in it all the outlets and actions of your view controller will be stored, each of them with a certain attribute (for outlets the attribute is <code>[Outlet]</code>) that tells the designer what they are used for. You are not supposed to mess with this file, however, if you need to take an outlet out of there you can do so… as long as you place it somewhere else without the designer attribute, as I did when I had to perform an action as soon as a view was assigned:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="n">FaceView</span> <span class="n">_faceView</span><span class="p">;</span>
<span class="na">[Outlet]</span>
<span class="k">protected</span> <span class="n">FaceView</span> <span class="n">FaceView</span>
<span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_faceView</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">set</span>
    <span class="p">{</span>
        <span class="n">_faceView</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
        <span class="c1">// didSet:</span>
        <span class="kt">var</span> <span class="n">gesture</span> <span class="p">=</span> <span class="k">new</span> <span class="n">UIPinchGestureRecognizer</span><span class="p">();</span>
        <span class="n">gesture</span><span class="p">.</span><span class="n">AddTarget</span><span class="p">(()</span> <span class="p">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">_faceView</span><span class="p">.</span><span class="n">ChangeScale</span><span class="p">(</span><span class="n">gesture</span><span class="p">));</span>
        <span class="c1">// Ommited for brevity …</span>
        <span class="n">UpdateUI</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure></p>

<p>Despite the fact of that you must be switching between the Xcode designer and Xamarin’s IDE you should worry no more, you are in good hands when it comes to design the interface of your app.</p>

<p>I do have a complaint about the integration and that is because at the moment I was taking the course it was impossible to open a .storyboard file modified with Xcode 8 in Xamarin Studio, but I think they’re addressing this problem.</p>

<h2 id=\"custom-views\">Custom views</h2>
<p>Just as you can create custom controls using Swift or Obj-C you can create custom views using C#, there are a few things to take into consideration, though:</p>

<p>Make sure that your custom view implements a public constructor that takes an <code>IntPtr</code> instance as a parameter:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="nf">FaceView</span> <span class="p">(</span><span class="n">IntPtr</span> <span class="n">handle</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span> <span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span></code></pre></figure></p>

<p>Also, make sure to register your custom views to be visible at design time in the editor, using the appropiate attributes <code>Register</code> and <code>DesignTimeVisible</code>:</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="na">[Register(“FaceView”), DesignTimeVisible(true)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">FaceView</span> <span class="p">:</span> <span class="n">UIView</span>
<span class="p">{</span></code></pre></figure></p>

<p>If you want your properties to be available for modification at design time you will need to mark them with yet another couple of attributes (<code>Export</code> and <code>Browsable</code>):</p>

<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="na">[Export(“Color”), Browsable(true)]</span>
<span class="k">public</span> <span class="n">UIColor</span> <span class="n">Color</span>
<span class="p">{</span> <span class="c1">// …</span></code></pre></figure></p>

<h2 id=\"coredata\">CoreData</h2>
<p>Uh, for what I’ve been reading CoreData isn’t that easy to use with Xamarin… yet it is possible. I didn’t try to do the assignments, mainly because I find it too specific for my purposes at the moment. If you want to try, maybe this links points to a sample that uses this feature in Xamarin: <a href=\"https://developer.xamarin.com/samples/monotouch/ThreadedCoreData/\" target=\"_blank\">ThreadedCoreData sample</a>.</p>

<h2 id=\"my-code\">My code</h2>
<p>In case you are interested, you can see the code I created &amp; “translated” from some of the on class demos and assignments for this course in this <a href=\"https://github.com/fferegrino/cs193\" target=\"_blank\">GitHub repo</a> feel free to reach to me in case of doubts.</p>

<h2 id=\"so-where\">So… where?</h2>
<p>You can see the lectures from <a href=\"https://itunes.apple.com/mx/course/developing-ios-9-apps-swift/id1104579961?l=en\" target=\"_blank\">iTunes U</a> or <a href=\"https://www.youtube.com/watch?v=_lRx1zoriPo&amp;list=PLsJq-VuSo2k26duIWzNjXztkZ7VrbppkT\" target=\"_blank\">YouTube</a>.</p>

<h2 id=\"to-paul-hegarty\">To Paul Hegarty</h2>
<p>I’m 99.9999% sure that you won’t read this, but just in case you do: I want to thank you for this lecture, you cannot imagine the knowledge I have gained by simply sitting in front of a PC listening to you, following your code demos and doing the assignments, even using Xamarin. Also thanks to Stanford University for providing this course for free (even though I’d pay for it, seriously!)</p>
"
}