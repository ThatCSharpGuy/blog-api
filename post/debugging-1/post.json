{	
	"id" : "/post/debugging-1/",
	"tv" : false,
	"date": "2016-10-31 13:00:01 -0600",
	"title" : "Debugging parte 1",
	"author" : "Antonio Feregrino Bolaños",
	"featured_image": "http://thatcsharpguy.com/postimages//aprende-c-sharp/debugging/f.png",
	"tags" : ["AprendeCSharp"],
	  
	"content": '"Estoy seguro que nadie ha escrito un programa que a la primera salga bien, y también estoy seguro de que para corregir los errores en los tuyos has tenido que *debuguear* el código. En este post te voy a dar algunos tips para que depures tu código en C# y tu IDE de confianza.\n\n## Directivas de preprocesamiento  \nPrimero comencemos por la <a href=\"../directivas-preprocesador-c-sharp\">directiva de preprocesamiento</a> `#if` y el símbolo `DEBUG`. Si envuelves cualquier parte de código entre un `if DEBUG` y `#endif` únicamente será compilado cuando el símbolo en cuestión esté definido. Si estás usando un IDE es muy común que `DEBUG` esté definido cuando estás usando la configuración  *Debug* de tu proyecto.\n\n<div class=\"pure-g\">\n<div class=\"pure-u-1 pure-u-md-1-2\">\n<figure><img src='/postimages/post/debugging-1/post.jsonconfig-vs.png' alt='\"Distintas salidas\" images_set' /></figure>\n</div>\n<div class=\"pure-u-1 pure-u-md-1-2\">\n<figure><img src='/postimages/post/debugging-1/post.jsonconfig-xs.jpg' alt='\"Distintas salidas\" images_set' /></figure>\n</div>  \n</div>  \n\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">n</span><span class="cp">#if DEBUG\nConsole.WriteLine(\&quot;Solo visible en modo debug, directiva: DEBUG\&quot;);\n#endif\n</span></code></pre></figure>  \n\n## Sobreescribir el método ToString  \nOtra de las cosas que puedes hacer es sobreescribir el método `ToString` en tus clases, ya que por default, C# regresará el nombre calificado del tipo que estamos llamando. Si, por ejemplo, hubiéramos sobreescrito el método en nuestra clase `TestClass` de la siguiente manera:  \n\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">npublic</span> <span class="k">class</span> <span class="nc">TestClass</span><span class="err">\</span><span class="n">n</span><span class="p">{</span><span class="err">\</span><span class="n">n</span>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Propiedad1</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span><span class="err">\</span><span class="n">n</span>    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="n">ToString</span><span class="p">()</span><span class="err">\</span><span class="n">n</span>    <span class="p">{</span><span class="err">\</span><span class="n">n</span>        <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="err">\</span><span class="s">&quot;{0}:{1}\&quot;, nameof(Propiedad1), Propiedad1);\n    }\n</span></code></pre></figure>  \n\nAl llamar al método `Console.WriteLine` de la siguiente manera:\n\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nConsole</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tc</span><span class="p">);</span><span class="err">\</span><span class="n">n</span></code></pre></figure>  \n\nHubiéramos obtenido lo siguiente:  \n\n<div class=\"pure-g\">\n<div class=\"pure-u-1 pure-u-md-1-2\">\nSin sobreescribir <code>ToString</code>\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nDebuggingTips</span><span class="p">.</span><span class="n">TestClass</span><span class="err">\</span><span class="n">n</span></code></pre></figure>  \n</div>\n<div class=\"pure-u-1 pure-u-md-1-2\">\nSobreescribiendo <code>ToString</code>\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nPropiedad1</span><span class="p">:</span> <span class="n">Uno</span><span class="err">\</span><span class="n">n</span></code></pre></figure>  \n</div>  \n</div>  \n\n## Atributo DebuggerDisplay  \nExiste una falla con usar `ToString`... y es que esta es una modificación que afectará a toda nuestra aplicación, aún cuando no estemos depurando el código. Para solucionarlo, podemos comentar ese código cuando ya no estemos depurando o envolver la sobreescritura en un `#if DEBUG`.\n\nPero bueno, las dos opciones suenan un poco mal. Si tu aplicación no tiene alguna forma de escribir en pantalla y únicamente vas a depurar en el IDE, puedes hacer uso del <a href=\"../atributos-c-sharp\">atributo</a> `DebuggerDisplay` \n\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">n</span><span class="p">[</span><span class="n">DebuggerDisplay</span><span class="p">(</span><span class="err">\</span><span class="s">&quot;Propiedad1: {Propiedad1}\&quot;)]\npublic class TestClass\n</span></code></pre></figure>  \n\nQue en pocas palabras, le dirá a nuestro entorno de desarrollo cómo debe mostrar los tipos de dato cuando estemos *debugueando*:  \n\n<figure><img src='/postimages/post/debugging-1/post.jsondebugger-display.jpg' alt='\"Distintas salidas\" images_set' /></figure>\n\n## Métodos de la clase Diagnostics.Debug  \nOtra de las opciones que tenemos (y que yo descubrí recientemente) es la clase `Debug` en el *namespace* `System.Diagnostics`.\n\nPrimero, no siempre vas a estar programando aplicaciones que tengan una consola disponible, entonces no siempre vas a poder usar la clase `Console`, es aquí cuando podemos usar:\n\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nSystem</span><span class="p">.</span><span class="n">Diagnostics</span><span class="p">.</span><span class="n">Debug</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">tc</span> <span class="p">+</span> <span class="err">\</span><span class="s">&quot;// Debug.WriteLine \&quot;);\n</span></code></pre></figure>  \n\nQue como puedes ver, es muy parecido al método que ya conoces. Con la diferencia de que este escribe a otro flujo de datos. En tu entorno de desarrollo generalmente lo podrás ver en la ventana de *Salida de la aplicación* o *Application output*:\n\n<div class=\"pure-g\">\n<div class=\"pure-u-1 pure-u-md-1-2\">\n<figure><img src='/postimages/post/debugging-1/post.jsonwritelines-vs.png' alt='\"Distintas salidas\" images_set' /></figure>\n</div>\n<div class=\"pure-u-1 pure-u-md-1-2\">\n<figure><img src='/postimages/post/debugging-1/post.jsonwritelines-xs.jpg' alt='\"Distintas salidas\" images_set' /></figure>\n</div>  \n</div>  \n\n\nHay ocasiones en las que solamente deseamos saber si una o varias condiciones se cumpliero, y pareciera que ese es trabajo para la sentencia de control `if`. O, podrías usar el método `WriteLineIf` si el valor enviado como primer parámetro es verdadero. Está de más decir que podemos llamar a ejecutar una función ahí dentro:\n\n<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="err">\</span><span class="n">nSystem</span><span class="p">.</span><span class="n">Diagnostics</span><span class="p">.</span><span class="n">Debug</span><span class="p">.</span><span class="n">WriteLineIf</span><span class="p">(</span><span class="n">tc</span><span class="p">.</span><span class="n">Propiedad1</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="err">\</span><span class="s">&quot;Dos\&quot;), tc);\n</span></code></pre></figure>  \n\nEn este post únicamente hablé del método `WriteLine` y `WriteLineIf`, pero tienes que saber que esta clase tiene muchas más características.\n\nEn futuros posts estaré hablando de más tips para depurar usando Visual Studio y Xamarin Studio, así que <a href=\"http://localhost:4000/unete/\">no olvides suscribirte</a> para estar enterado.\n "'   
}