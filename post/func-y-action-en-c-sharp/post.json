{	
	"id" : "/post/func-y-action-en-c-sharp/",
	"tv" : false,
	"date": "2015-07-29 13:00:00 -0500",
	"title" : "Func y Action en C#",
	"author" : "Antonio Feregrino Bolaños",
	"featured_image": "http://thatcsharpguy.com/postimagesfeatured.jpg",
	"tags" :
	[ 
		"AprendeCSharp"
	],
	"content" : "<p>Hace muy poco les hablaba de los <a href=\"/delegados-en-c-sharp\">delegados en C#</a>, aprovechando este post quisiera hablarles un poco de la utilidad de estos. Como lo mencionaba, los delegados permiten a un desarrollador “inyectar” su propio código dentro de los métodos de el código escrito  por un tercero.</p>

<p>Para poner un ejemplo, imaginemos que tenemos una lista de palabras <code>palabras</code>  y un método <code>RealizaOperacionSecreta</code> que realiza cierta operación <em>secreta</em> sobre esa lista de palabras y las imprime en consola. Dicho método fue escrito por un desarrollador que no conocemos, pero que fue lo suficientemente amable para permitirnos elegir sobre qué palabras se realiza la operación mediante el uso de un delegado llamado <code>filtro</code>.
<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RealizaOperacionSecreta</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">palabras</span><span class="p">,</span> <span class="n">Func</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">filtro</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">foreach</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span> <span class="k">in</span> <span class="n">palabras</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="n">filtro</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
			<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">());</span>
		<span class="k">else</span>
			<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
	<span class="p">}</span>			
<span class="p">}</span></code></pre></figure>
#### Func
Un momento... ese NO ES UN DELEGADO... ¿o si?. En realidad sí lo es, ```Func``` es un molde para crear delegados, podemos usar ese molde para evitarnos la fatiga de declarar un delegado para cada ocasión que necesitemos uno ```Func``` hace uso de los genéricos para especificar los parámetros de entrada y el tipo de retorno del delegado. En este caso, podemos decir que: ```delegate bool Filtro(string s)``` equivale a ```Func&lt;string, bool&gt;```.
Para dejar un poco más claras las cosas colocaré algunos ejemplos en código:
<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">delegate</span> <span class="kt">int</span> <span class="nf">Cuenta</span><span class="p">(</span><span class="kt">string</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span> <span class="c1">// Sería igual usar Func&amp;lt;string, int, int&amp;gt;</span>
<span class="k">delegate</span> <span class="kt">char</span> <span class="nf">Separa</span><span class="p">();</span> <span class="c1">// Es igual a usar Func&lt;char&gt;</span>
<span class="k">delegate</span> <span class="kt">float</span> <span class="nf">Uhh</span><span class="p">(</span><span class="kt">char</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">string</span> <span class="n">c</span><span class="p">,</span> <span class="kt">double</span> <span class="n">d</span><span class="p">);</span> <span class="c1">// Es igual a usar Func&amp;lt;char, int, string, double, float&amp;gt;</span></code></pre></figure>
Siempre el último tipo de dato especificado dentro de los ```&lt; &gt;``` será el tipo de retorno, por eso que si solo se especifica uno, este será el tipo de retorno del método. Podemos usarlo para crear delegados con hasta 16 parámetros de entrada.</char></string></p>

<p>Volviéndo al ejemplo… Podríamos entonces hacer uso del método de la siguiente manera:
<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">palabras</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="err">\</span><span class="s">&quot;uno\&quot;, \&quot;dos\&quot;, \&quot;tres\&quot;, \&quot;cuatro\&quot; };</span>
	<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">\</span><span class="s">&quot;Palabras mayores a 3 caracteres\&quot;);</span>
	<span class="n">RealizaOperacionSecreta</span><span class="p">(</span><span class="n">palabras</span><span class="p">,</span> <span class="n">PorTamano</span><span class="p">);&lt;/</span><span class="kt">string</span><span class="p">&gt;&lt;/</span><span class="kt">string</span><span class="p">&gt;&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">pre</span><span class="p">&gt;&lt;</span><span class="n">code</span><span class="p">&gt;</span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">\</span><span class="s">&quot;Palabras que comienzan con u\&quot;);</span>
<span class="n">RealizaOperacionSecreta</span><span class="p">(</span><span class="n">palabras</span><span class="p">,</span> <span class="n">SoloConU</span><span class="p">);</span> <span class="p">}</span>
<span class="p">&lt;/</span><span class="n">code</span><span class="p">&gt;&lt;/</span><span class="n">pre</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">PorTamano</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">Length</span> <span class="p">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="m">3</span><span class="p">;</span> 
<span class="p">}&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="n">SoloConU</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="err">“</span><span class="n">u</span><span class="err">”</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>
El resultado de la ejecución es el siguiente, y es que está usando como filtros la función que le estamos pasando:</p>
<pre>
Palabras mayores a 3 caracteres
uno
dos
TRES
CUATRO
Palabras que comienzan con u
UNO
dos
tres
cuatro
</pre>

<h4 id=\"action\">Action</h4>
<p>Ahora, supongamos que además de dejarnos escoger el filtro, también nos deja especificar la acción a realizar, en este caso utilizando un delegado que tenga <strong>void</strong> como tipo de retorno. Un delegado con un tipo de retorno <code>void</code> puede ser reemplazado con un molde llamado <code>Action</code>. De tal manera que la implementación del nuevo método podría ser la siguiente:
<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">RealizaOperacionSecreta</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">palabras</span><span class="p">,</span> <span class="n">Func</span><span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">filtro</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">accion</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">foreach</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span> <span class="k">in</span> <span class="n">palabras</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span><span class="p">(</span><span class="n">filtro</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
			<span class="n">accion</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
	<span class="p">}</span>			
<span class="p">}</span></code></pre></figure>
#### En resumen
<code>Func</code> es un molde para crear delegados de manera rápida, especificando los parámetros de entrada y el tipo de retorno mediante el uso de los ```&lt; &gt;```, <code>Action</code> cumple con la misma tarea, salvo que no tiene un tipo de retorno. En el siguiente post hablaré de las expresiones lambda una forma más elegante y simple de definir la implementación de delegados. Recuerda nuevamente que el enlace al código está en <a href=\"#post-meta\">información del post</a>. En un post siguiente les hablaré de las expresiones lambda, otra manera de trabajar con delegados.</string></string></p>

"
}